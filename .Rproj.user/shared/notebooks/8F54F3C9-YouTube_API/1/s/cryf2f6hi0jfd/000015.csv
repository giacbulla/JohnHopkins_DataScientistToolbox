"0","# temporary variables"
"0","nextPageToken <- """""
"0","upload.df <- NULL"
"0","pageInfo <- NULL"
"0","# Loop through the playlist while there is still a next page"
"0","while (!is.null(nextPageToken)) {"
"0","  # Construct the API call"
"0","  api_params <- "
"0","    paste(paste0(""key="", key), "
"0","          paste0(""playlistId="", playlist_id), "
"0","          ""part=snippet,contentDetails,status"","
"0","          ""maxResults=50"","
"0","          sep = ""&"")"
"0","  "
"0","  # Add the page token for page 2 onwards"
"0","  if (nextPageToken != """") {"
"0","    api_params <- paste0(api_params,"
"0","                         ""&pageToken="",nextPageToken)"
"0","  }"
"0","  "
"0","  api_call <- paste0(base, ""playlistItems"", ""?"", api_params)"
"0","  api_result <- GET(api_call)"
"0","  json_result <- content(api_result, ""text"", encoding=""UTF-8"")"
"0","  upload.json <- fromJSON(json_result, flatten = T)"
"0","  "
"0","  nextPageToken <- upload.json$nextPageToken"
"0","  pageInfo <- upload.json$pageInfo"
"0","  "
"0","  curr.df <- as.data.frame(upload.json$items)"
"0","  if (is.null(upload.df)) {"
"0","    upload.df <- curr.df"
"0","  } else {"
"0","    upload.df <- bind_rows(upload.df, curr.df)"
"0","  }"
"0","}"
"0",""
